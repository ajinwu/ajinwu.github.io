<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="计算机网络复习概要, python bigdata docker spark linux django">
   <meta name="baidu-site-verification" content="xB7VApzxXd" />
    <meta name="description" content="概述互联网的核心部分起特殊作用的是路由器. 路由器实现分组交换的关键构件, 其任务是转发收到的分组

电路交换的三个步骤:

建立连接
通话
释放连接;在通话的全部时间内, 通话的两个用户始终占用全部端到端的通信资源


分组交换技术的主要">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>计算机网络复习概要 | ajin的博客</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">
    
    <script src="/libs/jquery/jquery.min.js"></script>
    
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper head-container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">ajin的博客</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">ajin的博客</div>
        <div class="logo-desc">
            
            xau | 软件工程 | python bigdata
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			Contact
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/ajinwu" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>

        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/ajinwu" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/23.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        计算机网络复习概要
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">
                                <span class="chip bg-color">计算机网络</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" class="post-category">
                                计算机网络
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2019-11-28
                </div>
                

                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    9.6k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    33 分
                </div>
                
				
                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
            
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>互联网的核心部分起特殊作用的是路由器. 路由器实现分组交换的关键构件, 其任务是转发收到的分组</p>
<ol>
<li><p>电路交换的三个步骤:</p>
<ol>
<li>建立连接</li>
<li>通话</li>
<li>释放连接;在通话的全部时间内, 通话的两个用户始终占用全部端到端的通信资源</li>
</ol>
</li>
<li><p>分组交换技术的主要特点:</p>
<ol>
<li>采用存储转发技术, 我们要发送的整块数据称为一个报文, 发送报文时将报文划分成登场数据段, 加上必要的首部就成了一个分组/包</li>
<li>位于网络边缘的主机和位于网络核心部分的路由器都是计算机, 主机为用户进行信息处理, 路由器用来转发分组</li>
<li>路由器收到分组, 暂时存储, 检查其首部, 查找转发表, 检查首部目的地址, 从合适的接口转发出去, 将分组交给下一个路由器</li>
</ol>
</li>
<li><p>分组交换的主要有点</p>
<ol>
<li>高效, 在分组传输中动态分配传输贷款, 对通信链路逐段占用</li>
<li>灵活, 为每一个分组独立的选择最合适的转发路由</li>
<li>迅速, 以分组为单位, 可以不先建立连接就能向其他主机发送分组</li>
<li>可靠, 保证可靠性的网络协议, 分布式多路由的分组交换网</li>
</ol>
</li>
<li><p>几种不同的计算机网络</p>
<p> 作用范围:</p>
<ol>
<li><p>广域网(WAN)</p>
</li>
<li><p>城域网(MAN), 覆盖范围5-50km, 采用以太网技术</p>
</li>
<li><p>局域网(LAN), 范围1km</p>
</li>
<li><p>个人区域网(PAN)和无线个人区域网(WPAN)</p>
<p>按照使用中分类</p>
</li>
<li><p>公用网</p>
</li>
<li><p>专用网</p>
</li>
</ol>
</li>
<li><p>计算机网络的性能</p>
<p> 计算机网络的性能指标</p>
<ol>
<li><p>速率: 指数据的传送速率, 也称为数据率或比特率</p>
</li>
<li><p>带宽: 在频域中是信号具有的频带宽度, 在时域中网络通道内传送数据的能力</p>
</li>
<li><p>吞吐量: 单位时间内通过某个网络的实际数据量</p>
</li>
<li><p>时延是指数据(一个报文或者分组)从网络(链路)的一端传送带另一端所需的时间</p>
<ol>
<li><p>发送时延: 是主机或路由器发送数据帧所需要的时间, 也叫传输时延, 发送时延=(数据帧长度)/(发送速率)</p>
</li>
<li><p>传播时延: 是电磁波在信道中传播一定的距离需要花费的时间, 传播时延=信道长度/电磁波在信道上的传播速率</p>
<p>电磁波在自由空间的传播速率是光速3<em>10^5Km/s, 在铜线电缆中的传播速率为2.3</em>10^5Km/s, 在光纤中的传播速率为2*10^5Km/s</p>
<p>发送时延是只在网络适配器内部转发分组的时延, 传播时延在链路中的发送时延</p>
</li>
<li><p>处理时延: 是主机或者路由器收到分组是花费一定的时间进行处理(分析首部等)</p>
</li>
<li><p>排队时延: 是分组经过网络传输是经过路由器后要先在输入队列中排队等待处理的时延</p>
</li>
<li><p>时延带宽积: 是传播时延和带宽相乘, 时延带宽积是指链路的容纳量</p>
</li>
<li><p>往返时间RTT, 发送时间=数据长度/发送速率, 有效数据率=数据长度/(发送时间+RTT)</p>
</li>
<li><p>利用率有信道利用率和网络利用率, 网络当前时延=网络空闲时的时延/(1 - 利用率)</p>
</li>
</ol>
</li>
</ol>
</li>
<li><p>计算机网络</p>
<ol>
<li><p>协议与划分层次</p>
<p>  网络协议是为进行网络中的数据交换而建立规则,标准或约定</p>
<ol>
<li>语法, 即数据与控制信息的结构或格式</li>
<li>语义, 即需要发出何种控制信息, 完成何种动作以及做出何种响应</li>
<li>同步, 即事件实现顺序的详细说明</li>
</ol>
</li>
<li><p>网络层次</p>
<ol>
<li><p>各层是独立的. 不需要知道他的下一层是如何实现的, 只需要通过层间的接口提供服务</p>
</li>
<li><p>灵活性好, 当某一层发生变化时, 只要层间接口关系不便, 各层均不受影响</p>
</li>
<li><p>结构上可分割开, 各层采用最适合的技术来实现</p>
</li>
<li><p>易于实现和维护, 能够实现和调试一个庞大而又复杂的系统变得易于处理</p>
</li>
<li><p>能促进标准化工作</p>
<p>通常各层需要完成的功能</p>
<ol>
<li>差错控制</li>
<li>流量控制</li>
<li>分段和重装</li>
<li>复用和分用</li>
<li>连接建立和释放</li>
</ol>
</li>
</ol>
</li>
<li><p>具有五层协议的体系结构</p>
<p>  OSI参考模型具有七层体系结构, 物理层, 数据链路层, 数据链路层, 网路层, 传输层, 会话层, 表示层, 应用层<a href="https://zh.wikipedia.org/zh-hans/OSI%E6%A8%A1%E5%9E%8B" target="_blank" rel="noopener">OSI参考模型</a></p>
<p>  TCP/IP参考模型, 链路层, 网络层, 传输层, 应用层</p>
<p>  五层参考模型</p>
<ol>
<li><p>应用层, 通过应用进程间的交互来完成特定网络应用, 交互数据单元称为报文</p>
</li>
<li><p>运输层, 负责向两台主机中的进程之间的通信提供数据传输服务, 并不指定某个特定层网络应用, 多种应用都可以使用同一个运输层服务, 因此有复用和分用的功能, 复用是指多个应用同时使用运输层服务, 分用是运输层收到的信息分别交付到应用层中的相应进程</p>
<ol>
<li>transmission Control protocol协议—-提供面向连接的, 可靠的数据传输服务, 数据传输单位是报文段</li>
<li>User Datagram protocol协议—-提供无连接的,尽力的数据传输服务, 数据传输单位是用户数据报</li>
</ol>
</li>
<li><p>网络层, 为分组交换网上的不同主机提供通信服务, 将运输层产生的报文段或用户数据报封装成分组或包进行传送, 分组也称IP数据报, 另一个任务是将源主机运输层传下来的分组通过网络中的路由器找到目的主机</p>
</li>
<li><p>数据链路层, 数据链路层将网络层交下来的网络IP数据报组装成帧, 在相邻结点链路上传送帧, 每一帧包括数据和必要的控制信息(如同步信息等)</p>
</li>
<li><p>物理层, 光纤等</p>
<p>人们经常提到的TCP/IP并不一定是指这两个具体协议, 往往是整个TCP/IP协议族</p>
</li>
</ol>
</li>
<li><p>实体, 协议, 服务和服务访问点</p>
<p>  协议是控制两个对等实体(或多个)进行通信的规则的集合</p>
<p>  在协议的控制下, 两个对等实体间的通信是的本层能够向上一层提供服务, 要实现本层协议还需要实现下面一层所提供的服务</p>
<p>  协议是水平的, 服务是垂直的, 上层使用下层提供的服务必须通过与下一层交换命令(服务原语)</p>
<p>  TCP/IP协议可以为各式各样的应用提供服务, 同时TCP/IP协议也允许IP协议在各式各样的网络构成的互联网上运行</p>
</li>
</ol>
</li>
</ol>
<h1 id="物理层"><a href="#物理层" class="headerlink" title="物理层"></a>物理层</h1><p>物理层在计算机内部多采用并行传输方式, 但数据在通信线路上采用串行传输</p>
<p>一个数据通信系统可以划分为源系统, 传输系统, 目的系统</p>
<ol>
<li>源系统<ol>
<li>源点, 信号源</li>
<li>发送器, 通常源点生成的数字比特流要通过发送器编码后才能在传输系统进行传输, 典型的发送器是调制器, 很多计算机使用内置的调制解调器</li>
<li>接收器, 解调器</li>
<li>终点, 屏幕等</li>
</ol>
</li>
<li>信号<ol>
<li>模拟信号, 或连续信号, 调制解调器到电话局之间的用户线</li>
<li>数字信号, 或离散信号, 计算机到调制解调器</li>
</ol>
</li>
</ol>
<h2 id="信道基本概念"><a href="#信道基本概念" class="headerlink" title="信道基本概念"></a>信道基本概念</h2><ol>
<li>单向通信, 单工通信</li>
<li>双向交替通信, 半双工通信</li>
<li>双向同时通信, 全双工通信</li>
</ol>
<blockquote>
<p>来自信源的信号称为基带信号, 计算机输出的代表各种文字或图像文件的数据信号都属于基带信号, 基带信号中往往包含较多的低频成分, 甚至有直流成分, 因此需要对基带信号进行调制解调</p>
</blockquote>
<blockquote>
<p>调制可分为两类, 一种是仅对基带信号的波形进行变换, 使他能与信道特性相适应, 变换后的信号还是基带信号, 这类调制称为<code>基带调制</code>, 另一类调制需要使用载波进行调制, 把基带信号的频率范围搬移到较高的频段, bin转换为模拟信号, 进过载波的信号称为<code>带通信号调制</code></p>
</blockquote>
<ol>
<li><p>常用编码方式</p>
<ol>
<li>不归零值, 正电平为1, 负电平为0</li>
<li>归零制, 正脉冲为代表1, 负脉冲为0</li>
<li>曼彻斯特编码, 周期内向上跳的代表0, 向下跳代表1</li>
<li>差分曼彻斯特编码, 在每一位中心处始终有跳变, 位开始边界有跳变代表0，而位开始边界没有跳变代表1。</li>
</ol>
</li>
<li><p>基本的带通调制方法</p>
<ol>
<li>调幅(AM) 载波的振幅随基带数字信号而变化</li>
<li>调频(FM) 载波的频率随基带数字信号而变化</li>
<li>调相(PM) 载波的初始相位随基带数字信号而变化</li>
</ol>
</li>
<li><p>信噪比 = 10 log 10(s/n)</p>
</li>
</ol>
<p>香农公式: 信道的极限信息传输速率是 C = W log2(1 + s/N)(bit/s), w是信道的带宽(以hz为单位), S为信道内所传信号的平均功率, N为信道内部的高斯噪声功率</p>
<p>信道的带宽或信道中的信噪比越大, 信息的极限传输速率就越高, 用编码的方法让每一个码元携带更多比特的信息量</p>
<h2 id="物理层下面的传输媒体"><a href="#物理层下面的传输媒体" class="headerlink" title="物理层下面的传输媒体"></a>物理层下面的传输媒体</h2><ol>
<li>导引型媒体<ol>
<li>双绞线</li>
<li>同轴电缆</li>
<li>光缆, 传输损耗小, 中继距离长, 抗干扰强, 保密性好, 体积轻</li>
</ol>
</li>
</ol>
<h2 id="信道复用技术"><a href="#信道复用技术" class="headerlink" title="信道复用技术"></a>信道复用技术</h2><ol>
<li>频分复用, 时分复用和统计时分复用<ol>
<li>频分复用是所有用户在同样的时间占用不同的带宽(频率带宽)资源</li>
<li>时分复用的所有用户在不同的时间占用相同的频带宽度, 时分复用则有利于数字信号的传输</li>
</ol>
</li>
<li>波分复用是光的频分复用</li>
<li>码分复用: 每一个用户可以在同样的时间使用同样的频带进行通信, 由于各用户使用不同码型, 因此各用户之间不会造成干扰, 其频谱类似与白噪声, 不易被发现</li>
</ol>
<h2 id="宽带接入技术"><a href="#宽带接入技术" class="headerlink" title="宽带接入技术"></a>宽带接入技术</h2><ol>
<li>ADSL技术, 非对称数字用户线, 是用数字技术对现有的模拟电话用户线进行改造, 是他能承载宽带数字业务</li>
<li>光纤同轴混合网(HFC网)</li>
<li>FTTx技术, 光纤到户技术</li>
</ol>
<h1 id="数据链路层"><a href="#数据链路层" class="headerlink" title="数据链路层"></a>数据链路层</h1><p>数据链路层属于计算机网络的低层</p>
<ol>
<li>点对点通道, 这种通道使用一对一的点对点通信方式</li>
<li>广播信道, 这种信道使用一对多的广播通信方式</li>
</ol>
<h2 id="使用点对点信道的数据链路层"><a href="#使用点对点信道的数据链路层" class="headerlink" title="使用点对点信道的数据链路层"></a>使用点对点信道的数据链路层</h2><ol>
<li>数据链路和帧<ol>
<li>链路就是一个结点到相邻结点的一段物理线路(有线或无线)</li>
<li>数据链路是另一个概念, 在一条线路上传送数据时, 除了一条必须的物理链路外, 还需要包括必要的通信协议来控制这些数据的传输才构成了数据链路, 现在最常用的方法是使用网络适配器来实现这些协议, 一般的适配器都包括了数据链路层和物理层这两层功能</li>
</ol>
</li>
<li>帧<ol>
<li>数据链路层将网络层交下来的数据构成帧发送到链路上, 以及把收到的帧中的数据取出在上交到网络层, 网络层协议数据单元是IP数据报</li>
</ol>
</li>
<li>三个基本问题<ol>
<li>封装成帧是在一段数据的前后加上首部和尾部, 首部和尾部的一个重要作用是帧定界, 为了提高数据传输速率, 帧的数据部分长度应尽可能的大于首部和尾部的长度, 每一种链路层协议所能传送的帧的数据部分长度上线为最大传送单元MTU</li>
<li>透明传输, 由于帧的开始就结束的标记使用专门的控制字符, 因此所传输任何8比特组合总一定不允许和用作帧定界的控制字符比特编码相同, 在数据链路层透明传输表示无论什么样的比特组合的数据都能够原样无差错的通过数据链路层, 因此, 对于所传送的数据来说, 这些数据就看不见数据链路层有什么妨碍数据传输的东西(转义字符)</li>
<li>差错检测, 传输错误的比特总数站所传输比特总数的比率称为误码率, 信噪比越高误码率越小(循环冗余校验)<ol>
<li>循环冗余检验, 帧检验序列FCS是帧检验序列, 一般使用冗余检验法是模二运算, 异或运算, 发送的FCS是M + FCS(余数)</li>
<li>如果帧无差错, 将每一帧都除以除数, 余数为0</li>
<li>凡是被接收端数据链路层接受的帧均无差错</li>
<li>数据链路层没有提供可靠传输服务</li>
<li>在CRC上加上了帧编号, 确认和重传机制, 对于质量较好的有线传输线路, 不适用确认和重传机制</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="点对点协议PPP"><a href="#点对点协议PPP" class="headerlink" title="点对点协议PPP"></a>点对点协议PPP</h2><p>PPP协议满足的需求</p>
<ol>
<li>简单, 只进行封装校验</li>
<li>封装成帧</li>
<li>透明性</li>
<li>多种网络协议</li>
<li>多种类型链路</li>
<li>差错检测</li>
<li>检测连接状态</li>
<li>最大传送单元</li>
<li>网络层地址协商</li>
<li>数据压缩协商</li>
</ol>
<p>只支持点对点链路通信, 只支持全双工链路</p>
<p>协议的组成</p>
<ol>
<li>将IP数据报封装到串行链路的方法, PPP既支持异步链路(无奇偶校验的8比特数据), 也支持面向比特的同步链路</li>
<li>一个用来建立配置和测试数据链路连接的链路控制协议LCP</li>
<li>一套网络控制协议NCP, 其中每一个协议支持不同的网络层协议</li>
</ol>
<p>PPP协议帧格式<br><img src="https://img-blog.csdn.net/20160204105742700" alt="PPP协议帧格式"></p>
<ol>
<li>首部的第一个字段和尾部第二字段都是标志字段, 字段A和C没有携带帧信息,第四个字段是协议字段, 当协议字段是0x0021时, ppp帧信息字段是IP数据报, 若为0xC021是ppp链路协议的LCP数据, 0x8021是控制数据</li>
<li>字节填充<ol>
<li>将信息字段中的每一个0x7E 字节转变为2字节序列(0x7D, 0x5E)</li>
<li>若信息中出现了一个0x7D字节, 转变为(0x7D,0x5D)</li>
<li>若信息字段中出现小于0x20字符, 则在字符前加入一个0x7D字节, 同时改变编码</li>
</ol>
</li>
<li>零比特填充, 在使用SONET/SDH链路使用同步传输时, 只要发现连续5个一,则立即加入一个0</li>
</ol>
<h2 id="使用广播信道的数据链路层"><a href="#使用广播信道的数据链路层" class="headerlink" title="使用广播信道的数据链路层"></a>使用广播信道的数据链路层</h2><ol>
<li><p>局域网的数据链路层</p>
<p>网络为一个单位所有, 且地理范围和站点数目均有限</p>
<ol>
<li>具有广播功能</li>
<li>便于系统的扩展和逐渐演变, 各设备的位置可灵活调整和改变</li>
<li>提高了系统的可靠性, 可用性, 生存性</li>
</ol>
</li>
</ol>
<p>分类,星形网, 总线网, 环形网, 总线网中以太网最为出名</p>
<ol start="2">
<li><p>以太网标准<br>数据链路层被拆分为两层, 逻辑链路控制层LLC, 媒体接入控制MAC</p>
</li>
<li><p>适配器作用: 进行数据串行传输和并行传输的转换</p>
</li>
<li><p>CSMA/CD, 载波监听多点接入/碰撞检测</p>
<ol>
<li>采用无连接的方式, 尽最大努力交付, 重传也当做新的数据帧</li>
<li>曼彻斯特编码</li>
<li>载波监听是检测信道, 每个站都必须不停检测信道</li>
<li>碰撞检测也就是边发边听</li>
<li>一个站不可能同时进行发送和接收</li>
<li>争用期是值以太网在发送数据帧后至多经过两个时间, 又称碰撞窗口, 经过争用期还没有检测到碰撞才能肯定这次发送没有发生碰撞</li>
<li>以太网使用截断二进制指数退避算法, 发生碰撞后不是等待信道空闲后立即重发, 而是推迟一个最忌时间, 若连续多次发生冲突, 使用此算法可以使重传需要推迟的平均时间随重传次数二增大(动态退避)</li>
</ol>
</li>
<li><p>使用集线器的星形拓扑</p>
<ol>
<li>使用集线器的以太网逻辑上仍是总线网, 使用的还是CSMA/CD协议</li>
<li>一个集线器有许多接口</li>
<li>集线器工作在物理层, 每个接口仅简单转发比特不进行检测</li>
</ol>
</li>
<li><p>以太网的MAC层</p>
</li>
<li><p>硬件地址又称MAC地址, 固化在适配器ROM中的地址</p>
</li>
</ol>
<p>mac帧由五个字段组成, 前两段分别为6字节长的目的地址和原地址地址, 第三个字段是类型字段</p>
<h2 id="扩展以太网"><a href="#扩展以太网" class="headerlink" title="扩展以太网"></a>扩展以太网</h2><p>最初是网桥, 对收到的帧进行转发和过滤, 交换式集线器称为以太网交换机</p>
<ol>
<li>实质是多接口网桥, 每个接口都直接与单台主机或另一个以太网交换机相连, 还具有并行性, 链接多个主机同时通信</li>
<li>相互通信的主机都是独占传输媒体, 无碰撞的传输数据</li>
</ol>
<h2 id="虚拟局域网"><a href="#虚拟局域网" class="headerlink" title="虚拟局域网"></a>虚拟局域网</h2><p>100BASE-T 以太网, 使用IEEE802.3CSMA/CD协议, IEE802.3u<br>吉比特以太网IEE802.3z<br>10吉比特以太网和更快地以太网IEE802.3an</p>
<h1 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h1><p>##　网络层提供的两种服务<br>网络层向上只提供简单灵活的，无连接的尽最大努力交付的数据报服务</p>
<p>虚电路服务和数据报服务的对比<br>对比的方面 | 虚电路服务 | 数据报服务<br>— | — | —-<br>思路|可靠通信应当由网络来保证|可靠通信应该由用户主机来保证<br>连接的建立 | 必须有 | 不需要<br>终点的地址 | 仅在连接建立阶段使用, 每个分组使用短的虚电路好 | 每个端点都有终点的完整地址<br>分组的转发 | 属于同一虚电路的分组按照同意路由转发 | 每个分组独立选择路由进行转发<br>结点故障 | 均失败 | 丢失分组<br>分组顺序 | 按序到达 | 无序<br>差错控制流量控制 | 由网络或者用户主机负责 | 由用户主机负责</p>
<h2 id="网际协议IP"><a href="#网际协议IP" class="headerlink" title="网际协议IP"></a>网际协议IP</h2><p>与IP协议配套的协议还有三个协议</p>
<ol>
<li>地址解析协议ARP, 反向的RARP逆地址解析协议</li>
<li>网际控制报文协议ICMP</li>
<li>网际组管理协议IGMP</li>
</ol>
<h3 id="虚电路互连网络"><a href="#虚电路互连网络" class="headerlink" title="虚电路互连网络"></a>虚电路互连网络</h3><p>将网络互连起来的设备要使用一些中间设备</p>
<ol>
<li>物理层使用的中间设备叫做转发器</li>
<li>数据链路层使用的中间设备叫做网桥</li>
<li>网络层使用的中间设备叫做路由器</li>
<li>在网络层以上使用的中间设备叫做网关, 用网关连接两个不兼容的系统需要在高层进行协议的转换</li>
</ol>
<p>当中间设备是装阿奇或网桥, 这仅仅是扩大一个网络, 这仍然是一个网络, 并不是网络互连</p>
<p>互联网可以由多种易购网络互连组成</p>
<h3 id="分类ip地址"><a href="#分类ip地址" class="headerlink" title="分类ip地址"></a>分类ip地址</h3><p>IP地址由两个长度的字段组成, 第一个字段是网络号, 标志主机(或路由器)所连接到的网络, 一个网络号在整个互联网范围内是必须是唯一的, 第二个字段是主机号, 标志主机</p>
<p>A类B类C类地址的网络号字段分别为一个, 两个, 三个字节长<br>D类地址(前四位1110)用于多播<br>E类地址(前四位1111)保留以后用</p>
<p>A类地址网络号占一个字节,只有7位可供使用, 可使用的网络好为(2^7 - 2), 一个是全0地址, 代表网络本身. 一个是127保留作为本地软件环回测试主机间进程使用</p>
<p>A类地址主机号占三个字节, 每一个A类网络最大主机数为(2^24 -2): 全0的表示表示网络地址, 全1的表示网络上的所有主机</p>
<p>B类地址可指派的网络数为2^14 -1个, 最大主机数为2^16 - 2个</p>
<h3 id="ip地址与硬件地址"><a href="#ip地址与硬件地址" class="headerlink" title="ip地址与硬件地址"></a>ip地址与硬件地址</h3><p>物理地址是数据链路层和物理层使用的地址, IP地址是网络层和以上各层使用的地址, 是一种逻辑地址</p>
<p>IP地址放在IP数据报的首部, 硬件地址放在mac帧的首部, 在网络层和网络层以上使用的是ip地址, 数据链路层及一下使用的是链路地址</p>
<ol>
<li>在ip抽象的互联网上只能看见IP数据报</li>
<li>路由器只根据目的站的ip地址的网络号进行路由选择</li>
<li>在局域网的链路层, 只能看见mac帧</li>
<li>隐藏细节</li>
</ol>
<h2 id="地址解析协议ARP"><a href="#地址解析协议ARP" class="headerlink" title="地址解析协议ARP"></a>地址解析协议ARP</h2><p>ARP是在主机ARP高速缓存中存放一个IP地址到硬件地址的映射表, 并且实时更新</p>
<p>广播请求分组</p>
<h2 id="ip数据报格式"><a href="#ip数据报格式" class="headerlink" title="ip数据报格式"></a>ip数据报格式</h2><ol>
<li><p>固定首部</p>
<ol>
<li><p>版本号4位, 协议版本ipv?</p>
</li>
<li><p>首部长度4位, 表示最大十进制数值为15字节, 最常用的首部长度为20字节(即0101)</p>
</li>
<li><p>区分服务8位, 一般不使用</p>
</li>
<li><p>总长度值首部和数据数据之和的长度, 单位为字节, 总长度为16位, 数据报最大长度为2^16 - 1字节</p>
<blockquote>
<p>IP协议规定, 所有的主机路由必须能够接受长度不超过576字节的数据报, 超过时需要分片</p>
</blockquote>
</li>
<li><p>标识16位, 作为计数器, 产生一个数据报就加1, ip作为无连接服务不存在按序接收,用来重组数据报, 在分片时这个标识字段复制给所有的数据报标识字段</p>
</li>
<li><p>标志3位, 只有两位有意义</p>
<ol>
<li>最低位字段为MF,MF=1 标识后面还有分片的数据报,MF=0 标识是若干数据报片中的最后一个</li>
<li>中间一位为DF, 标识不能分片, 当DF=0才允许分片</li>
</ol>
</li>
<li><p>片偏移13位, 分片后在原分组的相对位置</p>
</li>
<li><p>生存时间8位, 防止无法转发的, 每经过一个路由器就把TTL减去数据报在路由器消耗的时间, 小于一就减一,现在是跳数限制</p>
</li>
<li><p>协议8位,例如ICMP</p>
</li>
<li><p>首部校验和16位, 只校验数据报的首部, 先把IP数据报首部划分为16字节的序列, 校验和字段设为0, 算数运算想加所有的, 写入到检验和字段, 接收方收到后把所有的16字节使用运算相加后取反码, 未发生变化结果为0</p>
</li>
<li><p>源地址</p>
</li>
<li><p>目的地址</p>
</li>
</ol>
</li>
</ol>
<h2 id="划分子网和构造超网"><a href="#划分子网和构造超网" class="headerlink" title="划分子网和构造超网"></a>划分子网和构造超网</h2><ol>
<li><p>划分子网</p>
<ol>
<li>ip地址空间利用率不合理</li>
<li>给每一个物理网络分配一个网络号会使路由表变的太大, 互联网中的网络越多, 路由器中的路由表项目数越多, 也会导致路由器成本变高</li>
<li>两级IP地址不灵活</li>
</ol>
</li>
<li><p>划分子网的思路与</p>
<ol>
<li>一个拥有许多物理网络的单位, 可将所属的网络划分成若干子网, 划分子网是单位内部的, 单位以外的看不见, 只表现一个物理网络</li>
<li>从主机网络号借用若干位做子网号</li>
</ol>
</li>
<li><p>子网掩码, 用来确定网络划分</p>
<ol>
<li>把三级ip地址和收到的数据报目的地址按位与就能得出子网的网络地址</li>
</ol>
</li>
<li><p>使用子网时分组的转发</p>
<ol>
<li>路由表必须包含: 目的网络地址, 子网掩码, 下一跳地址</li>
<li>相与之后的结果如果不在路由表, 继续将结果再次相与</li>
</ol>
</li>
<li><p>无分类编址CIDR(构造超网)</p>
<ol>
<li>消除了传统A类等划分子网的概念</li>
<li>将32位IP地址分为前后两部分, 前面部分是网络前缀,后面部分指主机</li>
<li>使用斜线记法,IP地址后面加上斜线,然后协商网络前缀所占的位数</li>
<li>CIDR使用32为的地址掩码,也可称为子网掩码,斜线表示1的个数</li>
<li>最长前缀匹配</li>
</ol>
</li>
</ol>
<h2 id="网际控制报文协议"><a href="#网际控制报文协议" class="headerlink" title="网际控制报文协议"></a>网际控制报文协议</h2><p>允许主机或路由器报告差错</p>
<ol>
<li>种类<ol>
<li>ICMP差错报告报文</li>
<li>ICMP询问报文</li>
</ol>
</li>
</ol>
<p>统一三个字段: 类型, 代码和校验和</p>
<table>
<thead>
<tr>
<th>ICMP报文种类</th>
<th>类型值</th>
<th>ICMP报文类型</th>
</tr>
</thead>
<tbody><tr>
<td>差错报告报文</td>
<td>3</td>
<td>终点不可达</td>
</tr>
<tr>
<td>–</td>
<td>11</td>
<td>时间超过</td>
</tr>
<tr>
<td>–</td>
<td>12</td>
<td>参数问题</td>
</tr>
<tr>
<td>–</td>
<td>5</td>
<td>改变路由</td>
</tr>
<tr>
<td>询问报文</td>
<td>8/0</td>
<td>回送请求或应答</td>
</tr>
<tr>
<td>–</td>
<td>13/14</td>
<td>时间戳请求或回答</td>
</tr>
</tbody></table>
<p>应用在ping/tracerout</p>
<h2 id="互联网的路由选择协议"><a href="#互联网的路由选择协议" class="headerlink" title="互联网的路由选择协议"></a>互联网的路由选择协议</h2><ol>
<li><p>理想的路由算法</p>
<ol>
<li>算法完整</li>
<li>计算简单</li>
<li>适应变化</li>
<li>具有稳定性</li>
<li>公平的</li>
<li>最佳的</li>
</ol>
</li>
<li><p>分层次路由选择协议</p>
<ol>
<li>自治系统</li>
<li>内部网关协议IGP, 处在相同同的自治系统中, 如RIP和OSPF协议</li>
<li>外部网关EGP协议</li>
</ol>
</li>
<li><p>内部网关RIP是一种分布式的基于距离向量的路由网关协议, 距离也称跳数, RIP允许一条路劲最多15个路由器, 只适用于小型互联网</p>
<ol>
<li>仅仅和邻路由器交换信息</li>
<li>交换的信息是路由表</li>
<li>按固定时间间隔交换信息</li>
</ol>
</li>
</ol>
<p>RIP协议首部4字节, 每个路由信息20字节, 最多包含25个路由</p>
<ol start="4">
<li><p>内部网关协议OSPF</p>
</li>
<li><p>开放最短路径优先, 是分布式的链路状态协议</p>
<ol>
<li>洪泛法向本自治系统所有路由器发送信息</li>
<li>发送的是与本路由器相邻的所有路由器链路状态</li>
<li>只有当链路状态发生变化后才向路由器发送信息</li>
</ol>
</li>
<li><p>外部网关协议BGP</p>
<ol>
<li>互联网规模太大, 自治系统之间路由选择困难</li>
<li>自治系统之间的路由选择必须考虑油管策略</li>
</ol>
</li>
</ol>
<h2 id="ipv6"><a href="#ipv6" class="headerlink" title="ipv6"></a>ipv6</h2><ol>
<li><p>IPv6基本首部</p>
<ol>
<li>更大的地址空间</li>
<li>扩展的地址层次结构</li>
<li>灵活的首部格式</li>
<li>允许协议的继续扩充</li>
<li>支持资源的预分配</li>
<li>首部8字节对其</li>
</ol>
</li>
<li><p>IPv6的改变</p>
<ol>
<li>取消了首部长度字段, 固定40字节</li>
<li>取消服务类型字段, 优先级和流标号实现了功能</li>
<li>取消了总长度字段改为有效载荷长度字段</li>
<li>取消了标识,标志, 片偏移字段, 包含在分片扩展首部</li>
<li>取消了协议字段, 改用下一个首部字段</li>
<li>取消了检验和字段</li>
<li>取消了选项字段, 用扩展来实现功能</li>
</ol>
</li>
<li><p>首部格式</p>
<ol>
<li>版本4位</li>
<li>通信量8位,区分数据报类别或优先级</li>
<li>流标号20位,流是互联网上从特定源点到特定终点(单播或多播)的一些了数据报(视频等), 流经过的路径上都保证指明服务质量</li>
<li>有效载荷长度16位, 除基本首部以外的字节数, 最大值为64kB</li>
<li>下一个首部8位,相当于ipv4协议字段或可选字段</li>
<li>跳数限制,TTL</li>
<li>源地址128位</li>
<li>目的地址128位</li>
</ol>
</li>
<li><p>ipv6的地址</p>
<ol>
<li>单播:点对点通信</li>
<li>多播:一点对多点的通信</li>
<li>任播:终点是一组计算机</li>
</ol>
</li>
</ol>
<p>IPv4到IPv6的转变</p>
<ol>
<li>双协议栈值一部分主机装有双协议站,v4和v6,双向通信,若DNS返回的是ipv4的地址,双协议栈主机就是用v4, 在v4向v6转发的时候转换后再发, 但是有些数据没法恢复, 例如流标号</li>
<li>隧道技术, 在ipv6进入v4网络时, 将ipv6数据报封装为v4数据部分,整个v6数据报变成了v4数据报数据部分</li>
<li>ip多播</li>
</ol>
<h2 id="vpn和网络地址转换NAT"><a href="#vpn和网络地址转换NAT" class="headerlink" title="vpn和网络地址转换NAT"></a>vpn和网络地址转换NAT</h2><p>vpn在对路由器中的所有路由器, 对目的地址是专用地址的数据报一律不进行转发,也称专用互联网</p>
<h1 id="运输层"><a href="#运输层" class="headerlink" title="运输层"></a>运输层</h1><h2 id="运输层协议概述"><a href="#运输层协议概述" class="headerlink" title="运输层协议概述"></a>运输层协议概述</h2><h3 id="进程之间的通信"><a href="#进程之间的通信" class="headerlink" title="进程之间的通信"></a>进程之间的通信</h3><p>运输层向它上面的应用层提供通信服务, 是面向通信部分的最高层, 也是用户功能的最低层</p>
<p>运输层为相互通信的应用进程提供了端到端的逻辑通信</p>
<p>IP层真正通信的实体是主机中的进程</p>
<h3 id="运输层的两个主要协议"><a href="#运输层的两个主要协议" class="headerlink" title="运输层的两个主要协议"></a>运输层的两个主要协议</h3><ol>
<li>用户数据报协议UDP</li>
<li>传输控制协议TCP</li>
</ol>
<h3 id="运输层端口"><a href="#运输层端口" class="headerlink" title="运输层端口"></a>运输层端口</h3><p>运输层所有的应用进程都可以通过运输层传送到IP层,这就是复用, 运输层从IP层收到发送给各应用进程的数据够分别交付给应用进程, 这就是分用</p>
<p>通信的终点虽然是应用进程, 单报文交付的是目的主机端口</p>
<h2 id="晕乎数据协议UDP"><a href="#晕乎数据协议UDP" class="headerlink" title="晕乎数据协议UDP"></a>晕乎数据协议UDP</h2><ol>
<li>udp是无连接的</li>
<li>尽最大努力交付</li>
<li>UDP是面向报文的, 一次性交付一个完整的报文</li>
<li>没有拥塞控制</li>
<li>UDP支持一对一, 一对多, 多对多的交互通信</li>
<li>UDP首部开销小</li>
</ol>
<h3 id="UDP首部格式-首部字段只有8个字节"><a href="#UDP首部格式-首部字段只有8个字节" class="headerlink" title="UDP首部格式, 首部字段只有8个字节"></a>UDP首部格式, 首部字段只有8个字节</h3><ol>
<li>源端口, 不需要可全为0</li>
<li>目的端口</li>
<li>长度, 最小值为8</li>
<li>检验和, 判断是够有误</li>
</ol>
<p>计算校验和时, 需要在头部加上一个伪首部(源IP地址, 目的IP地址, 0, 17, UDP长度), 仅用作计算检验和</p>
<h2 id="传输控制TCP"><a href="#传输控制TCP" class="headerlink" title="传输控制TCP"></a>传输控制TCP</h2><ol>
<li>面向连接</li>
<li>每条连接有两个TCP</li>
<li>TCP提供全双工通信</li>
<li>面向字节流, 指流入到进程或从进程流出的字节序列</li>
</ol>
<h3 id="tcp的链接"><a href="#tcp的链接" class="headerlink" title="tcp的链接"></a>tcp的链接</h3><p>TCP连接的端点是套接字,套接字是IP拼接端口</p>
<h3 id="可靠传输的工作原理"><a href="#可靠传输的工作原理" class="headerlink" title="可靠传输的工作原理"></a>可靠传输的工作原理</h3><p>TCP下面的网络提供的都是不可靠的传输, 不可靠的传输信道能够实现可靠传输</p>
<h3 id="停止等待协议"><a href="#停止等待协议" class="headerlink" title="停止等待协议"></a>停止等待协议</h3><p>停等就是每发送一个分组就停止发送等到确认</p>
<ol>
<li>无差错情况</li>
<li>出现差错后重传, 设置重传等待时间</li>
<li>确认丢失和确认迟到</li>
</ol>
<p>信道利用率= 发送分组时间/(发送分组时间 + RTT + 确认分组所需时间)</p>
<p>为了提高传输速率, 使用流水线传输</p>
<h3 id="连续ARQ协议"><a href="#连续ARQ协议" class="headerlink" title="连续ARQ协议"></a>连续ARQ协议</h3><p>滑动窗口协议, 每收到一个确认, 发送窗口就向前滑动一个分组位置,接受方采用累计确认的方式</p>
<h2 id="TCP报文段首部格式"><a href="#TCP报文段首部格式" class="headerlink" title="TCP报文段首部格式"></a>TCP报文段首部格式</h2><ol>
<li>源端口和目的端口, 各占2个字节</li>
<li>序号,占四个字节, 报文段序号</li>
<li>确认号, 占四字节, 期望收到对方下一个报文段的第一个数据字节的序号, 确认号表示序号前的所有数据都已正确收到</li>
<li>数据偏移, 占4位, 指出TCP报文段的数据起始处距离TCP报文段的起始出有多远</li>
<li>保留文6位</li>
<li>控制位6位, URG=1紧急字段</li>
<li>ACK=1是确认号字段才有效</li>
<li>推送PSH=1是立即创建一个报文段发送过去, 接收方收到后立即交付</li>
<li>复位RST=1表示需要释放链接,然后重新建立链接</li>
<li>同步SYN=1而ACK=0是表示这是一个请求连接报文段, 若同意连接, 响应报文段syn=1,ACK=1</li>
<li>终止FIN用来释放连接</li>
<li>窗口站两字节</li>
<li>检验和占两字节, 同UDP一样都要加上伪首部, 第四个字段应改为6</li>
<li>紧急指针,2字节在URG=1才有效,指出本报文段中的紧急数据字节数</li>
<li>选项, 长度可变, 最长20字节</li>
</ol>
<h2 id="TCP可靠传输的实现"><a href="#TCP可靠传输的实现" class="headerlink" title="TCP可靠传输的实现"></a>TCP可靠传输的实现</h2><h3 id="以字节为单位的滑动窗口"><a href="#以字节为单位的滑动窗口" class="headerlink" title="以字节为单位的滑动窗口"></a>以字节为单位的滑动窗口</h3><h3 id="超时重传时间的选择"><a href="#超时重传时间的选择" class="headerlink" title="超时重传时间的选择"></a>超时重传时间的选择</h3><h3 id="选择确认SACK"><a href="#选择确认SACK" class="headerlink" title="选择确认SACK"></a>选择确认SACK</h3><h2 id="TCP流量控制"><a href="#TCP流量控制" class="headerlink" title="TCP流量控制"></a>TCP流量控制</h2><p>流量控制是让发送方的发送速率不要太快, 要让接收方来得及接收,设置持续计时器防止丢失后形成死锁</p>
<h2 id="TCP拥塞控制"><a href="#TCP拥塞控制" class="headerlink" title="TCP拥塞控制"></a>TCP拥塞控制</h2><p>拥塞控制是防止过多的数据注入到网络中, 这样可以使用网络中的路由器或链路不会过载</p>
<p>流量控制是点对点通信量的控制, 是一个端到端的问题, 抑制发送方的数据发送速率</p>
<h3 id="拥塞控制方法"><a href="#拥塞控制方法" class="headerlink" title="拥塞控制方法"></a>拥塞控制方法</h3><p>慢开始, 拥塞避免, 快重传, 快恢复</p>
<ol>
<li>慢开始和拥塞避免</li>
</ol>
<p>基于窗口的拥塞控制, 发送方维持一个拥塞窗口的状态变量, 窗口的大小取决于网络的拥塞程度, 发送方让自己的发送窗口等于拥塞窗口</p>
<p>判断出现网络拥塞的依据是出现了超时</p>
<p>慢开始是由小到大逐渐增大拥塞窗口数值,每经过一个传输轮次就加倍</p>
<p>防止拥塞窗口增长过大引起拥塞,设置慢开始门限</p>
<p>拥塞避免算法就是让拥塞串口慢慢增大, 每经过一个往返时间RTT就加1</p>
<p>快重传是不等待自己发送数据是才确认,而是立即发送确认</p>
<h2 id="TCP运输链接管理"><a href="#TCP运输链接管理" class="headerlink" title="TCP运输链接管理"></a>TCP运输链接管理</h2><p>三次握手<br>四次挥手</p>
<h1 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h1><p>不同的网络应用的应用进程之间, 需要不同通信规则</p>
<h2 id="域名系统DNS"><a href="#域名系统DNS" class="headerlink" title="域名系统DNS"></a>域名系统DNS</h2><p>域名到IP的解析是有分布在互联网的域名服务器程序完成</p>
<p>域名不区分大小写, 完整域名不超过255个字符</p>
<h2 id="域名服务器"><a href="#域名服务器" class="headerlink" title="域名服务器"></a>域名服务器</h2><p>一个服务器所负责管辖的范围叫区, 一个区的所有节点必须是能够连通的, DNS服务器的范围不是以域作为单位, 而是区作为单位, 区小于等于域</p>
<ol>
<li>根域名服务器是最高层次的域名服务器, 所有根域名服务器都知道所有的顶级域名服务器</li>
<li>顶级域名服务器, 这些域名管理所有二级域名</li>
<li>权限域名服务器, 一个区的域名服务器</li>
<li>本地域名服务器<ol>
<li>主机向本地域名服务器的查询一般采用递归查询</li>
<li>本地域名服务器向根域名服务器查询使用迭代查询</li>
</ol>
</li>
<li>维护有高速缓存</li>
</ol>
<h2 id="文件传送协议FTP"><a href="#文件传送协议FTP" class="headerlink" title="文件传送协议FTP"></a>文件传送协议FTP</h2><p>FTP客户与服务器建立两个连接, “控制连接”和”数据传送连接”</p>
<h3 id="简单文件传送协议TFTP"><a href="#简单文件传送协议TFTP" class="headerlink" title="简单文件传送协议TFTP"></a>简单文件传送协议TFTP</h3><ol>
<li>每次传送512字节数据</li>
<li>数据报文按序编号,从1开始</li>
<li>支持ASCII码或二进制传送</li>
<li>可以对文件读写</li>
<li>使用简单的首部</li>
</ol>
<h2 id="远程终端协议TELNET"><a href="#远程终端协议TELNET" class="headerlink" title="远程终端协议TELNET"></a>远程终端协议TELNET</h2><h2 id="万维网WWW"><a href="#万维网WWW" class="headerlink" title="万维网WWW"></a>万维网WWW</h2><h3 id="统一资源定位符url"><a href="#统一资源定位符url" class="headerlink" title="统一资源定位符url"></a>统一资源定位符url</h3><h3 id="超文本传送协议HTTP"><a href="#超文本传送协议HTTP" class="headerlink" title="超文本传送协议HTTP"></a>超文本传送协议HTTP</h3><p>http1.1 使用的持续连接</p>
<h3 id="代理服务器"><a href="#代理服务器" class="headerlink" title="代理服务器"></a>代理服务器</h3><ol>
<li>请求代理服务器</li>
<li>若存在就返回</li>
<li>否则代理服务器与互联网上的源点服务器建立TCP连接,并发送http报文</li>
<li>源点服务器吧请求的对象放在http响应报文返回代理服务器</li>
<li>代理服务器收到后复制到自己本地存储器中, 在吧这个对象放在http响应报文总通过已建立的链接返回请求该对象的浏览器</li>
</ol>
<h3 id="http报文结构"><a href="#http报文结构" class="headerlink" title="http报文结构"></a>http报文结构</h3><ol>
<li>开始行, 区分请求报文和响应报文, 在开始行的三个字段之间用空格分隔开</li>
<li>首部行, 说明浏览器服务器或报文主体的一些信息,每一行的结束位置都要有回车和换行, 整个首部结束时, 还要空一行隔开</li>
<li>实体主题</li>
</ol>
<h2 id="电子邮件"><a href="#电子邮件" class="headerlink" title="电子邮件"></a>电子邮件</h2><p>简单邮件传送协议SMTP, 通用互联网邮件扩充(附件),邮件读取协议pop3</p>
<ol>
<li>连接建立250, 不可用421</li>
<li>邮件传送, 出错451, 452空间不够, 500命令无法识别</li>
<li>连接释放221</li>
</ol>
<h2 id="动态主机配置协议DHCP"><a href="#动态主机配置协议DHCP" class="headerlink" title="动态主机配置协议DHCP"></a>动态主机配置协议DHCP</h2><h2 id="简单网络管理协议SNMP"><a href="#简单网络管理协议SNMP" class="headerlink" title="简单网络管理协议SNMP"></a>简单网络管理协议SNMP</h2><h1 id="网络安全"><a href="#网络安全" class="headerlink" title="网络安全"></a>网络安全</h1><p>被动攻击是从网络上窃听他人通信内容</p>
<p>主动攻击</p>
<ol>
<li>篡改, 更改报文流</li>
<li>恶意程序<ol>
<li>计算机病毒</li>
<li>计算机蠕虫</li>
<li>特洛伊木马</li>
<li>逻辑炸弹</li>
<li>后门入侵</li>
<li>流氓软件</li>
</ol>
</li>
<li>拒绝服务</li>
</ol>
<h3 id="安全的计算机网络"><a href="#安全的计算机网络" class="headerlink" title="安全的计算机网络"></a>安全的计算机网络</h3><ol>
<li>保密性</li>
<li>端点鉴别</li>
<li>信息完整性</li>
<li>运行完全性</li>
</ol>
<h2 id="两类密码体制"><a href="#两类密码体制" class="headerlink" title="两类密码体制"></a>两类密码体制</h2><ol>
<li>对称密码密码体制,DES属于对称秘钥密码体制, 保密性取决于对秘钥的保密, 算法是公开的</li>
<li>公钥密码体制使用不同的加密秘钥和解密秘钥,基于大数分解的RSA体制</li>
<li>数字签名<ol>
<li>接受者能够核实发送至对报文的签名</li>
<li>接受者确认收到的数据没有被篡改过</li>
<li>发送者不可抵赖</li>
</ol>
</li>
<li>鉴别<ol>
<li>报文鉴别<ol>
<li>密码散列函数</li>
<li>MD5和SHA-1,SHA</li>
<li>报文鉴别码</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="运输层安全协议"><a href="#运输层安全协议" class="headerlink" title="运输层安全协议"></a>运输层安全协议</h2><ol>
<li>安全套接字层SSL</li>
<li>运输层安全TLS</li>
</ol>
<h2 id="应用层安全协议PGP"><a href="#应用层安全协议PGP" class="headerlink" title="应用层安全协议PGP"></a>应用层安全协议PGP</h2><h2 id="系统安全防火墙"><a href="#系统安全防火墙" class="headerlink" title="系统安全防火墙"></a>系统安全防火墙</h2><p>防火墙是一种访问控制技术,严格控制网络边界的分组禁止任何不必要的通信</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://www.ajin.cloud" rel="external nofollow noreferrer">ajin</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://www.ajin.cloud/2019/11/28/ji-suan-ji-wang-luo-fu-xi-gai-yao/">https://www.ajin.cloud/2019/11/28/ji-suan-ji-wang-luo-fu-xi-gai-yao/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="https://www.ajin.cloud" target="_blank">ajin</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">
                                    <span class="chip bg-color">计算机网络</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>
            
        </div>
    </div>

    
        <link rel="stylesheet" href="/libs/gitalk/gitalk.css">
<link rel="stylesheet" href="/css/my-gitalk.css">

<div class="card gitalk-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="gitalk-container" class="card-content"></div>
</div>

<script src="/libs/gitalk/gitalk.min.js"></script>
<script>
    let gitalk = new Gitalk({
        clientID: '3c0fb0b20fd68181dee3',
        clientSecret: '7d83ec633e6f8b84d626b7e4f3f617dba5b29992',
        repo: 'ajinwu.github.io',
        owner: 'ajinwu',
        admin: "ajinwu",
        id: '2019-11-28T19-19-15',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');
</script>
    

    

    
        <div class="disqus-card card" data-aos="fade-up">
    <div id="disqus_thread" class="card-content">
        <noscript>Please enable JavaScript to view the
            <a href="https://disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a>
        </noscript>
    </div>
</div>

<script type="text/javascript">
    disqus_config = function () {
        this.page.url = 'https://www.ajin.cloud/2019/11/28/ji-suan-ji-wang-luo-fu-xi-gai-yao/';
        this.page.identifier = '/2019/11/28/ji-suan-ji-wang-luo-fu-xi-gai-yao/';
        this.page.title = '计算机网络复习概要';
    };
    let disqus_shortname = '';

    (function () { // DON'T EDIT BELOW THIS LINE
        let d = document, s = d.createElement('script');
        // 如：s.src = 'https://blinkfox.disqus.com/embed.js';
        s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2019/12/02/wen-ben-yu-zi-fu-xu-lie/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/0.jpg" class="responsive-img" alt="文本与字符序列">
                        
                        <span class="card-title">文本与字符序列</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            字符问题对于字节序列, 可以理解为机器转储, Unicode字符是人类可读的文本
python3的str类型基本相当于python2的Unicode类型
字节概要python3内置两种基本的二进制序列类型: python3引入的不可变byt
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2019-12-02
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/python/" class="post-category">
                                    python
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E6%96%87%E6%9C%AC%E4%B8%8E%E5%AD%97%E7%AC%A6%E5%BA%8F%E5%88%97/">
                        <span class="chip bg-color">文本与字符序列</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2019/11/21/docker-gao-ji/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/7.jpg" class="responsive-img" alt="docker高级">
                        
                        <span class="card-title">docker高级</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            Docker
docker隔离的东西(linux namespace+chroot)
UTS(主机名和域名)
User(用户)
Mount挂载点(文件系统)
IPC(信号量, 消息队列, 共享队列)
Pid(进程编号)
Network(网络
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2019-11-21
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/docker/" class="post-category">
                                    docker
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/docker/">
                        <span class="chip bg-color">docker</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('80')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: ajin的博客<br />'
            + '文章作者: ajin<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归ajin所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>

    
<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>

    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
        <div class="container row center-align">
            <div class="col s12 m8 l8 copy-right">
                Copyright&nbsp;&copy;
                <span id="year">年份</span>
                <a href="https://www.ajin.cloud" target="_blank">ajin</a>
                |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
                |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
                <br>
                
                &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                    class="white-color">31.6k</span>&nbsp;字
                
                
                
                
                
                
                <span id="busuanzi_container_site_pv"> 
                    |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                        class="white-color"></span>&nbsp;次
                </span>
                
                
                <span id="busuanzi_container_site_uv">
                    |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                        class="white-color"></span>&nbsp;人
                </span>
                
                <br>
                
                <span id="sitetime">载入运行时间...</span>


<script>
    $(document).ready(function () {

        var int = setInterval(fixCount, 50);  // 50ms周期检测函数
        var pvcountOffset = 0;  // 初始化首次数据
        var uvcountOffset = 0;

        function fixCount() {
            if (document.getElementById("busuanzi_container_site_pv").style.display != "none") {
                $("#busuanzi_value_site_pv").html(parseInt($("#busuanzi_value_site_pv").html()) + pvcountOffset);
                clearInterval(int);
            }
            if ($("#busuanzi_container_site_pv").css("display") != "none") {
                $("#busuanzi_value_site_uv").html(parseInt($("#busuanzi_value_site_uv").html()) + uvcountOffset); // 加上初始数据 
                clearInterval(int); // 停止检测
            }
        }
    });
</script>

                <script>
                    function siteTime() {
                        window.setTimeout("siteTime()", 1000);
                        var seconds = 1000;
                        var minutes = seconds * 60;
                        var hours = minutes * 60;
                        var days = hours * 24;
                        var years = days * 365;
                        var today = new Date();
                        var startYear = "2019";
                        var startMonth = "11";
                        var startDate = "8";
                        var startHour = "0";
                        var startMinute = "0";
                        var startSecond = "0";
                        var todayYear = today.getFullYear();
                        var todayMonth = today.getMonth() + 1;
                        var todayDate = today.getDate();
                        var todayHour = today.getHours();
                        var todayMinute = today.getMinutes();
                        var todaySecond = today.getSeconds();
                        var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                        var diff = t2 - t1;
                        var diffYears = Math.floor(diff / years);
                        var diffDays = Math.floor((diff / days) - diffYears * 365);
                        var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                        var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                            minutes);
                        var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                            diffMinutes * minutes) / seconds);
                        if (startYear == todayYear) {
                            document.getElementById("year").innerHTML = todayYear;
                            document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                                " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                        } else {
                            document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                            document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                                " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                        }
                    }
                    setInterval(siteTime, 1000);
                </script>
                
                <br>
                
            </div>
            <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/ajinwu" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:ajin_w@163.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1550579449" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1550579449" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
        </div>
    </footer>
    
    <div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->


    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    

    

    
    <script type="text/javascript" src="/libs/background/ribbon-dynamic.js" async="async"></script>
    
    
    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
